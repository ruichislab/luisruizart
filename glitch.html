<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CYBER GLITCH | Net Art</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        body { background: #111; overflow: hidden; color: #fff; font-family: monospace; }
        #glitch-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 10vw; /* Responsive font size */
            font-weight: bold;
            text-transform: uppercase;
            white-space: nowrap;
            mix-blend-mode: difference;
        }

        .glitch-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.8;
        }

        #layer1 { color: #0ff; clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%); animation: glitch-anim-1 2s infinite linear alternate-reverse; }
        #layer2 { color: #f0f; clip-path: polygon(0 80%, 100% 20%, 100% 100%, 0 100%); animation: glitch-anim-2 3s infinite linear alternate-reverse; }

        @keyframes glitch-anim-1 {
            0% { clip-path: inset(20% 0 80% 0); transform: translate(-2px, 1px); }
            20% { clip-path: inset(60% 0 10% 0); transform: translate(2px, -1px); }
            40% { clip-path: inset(40% 0 50% 0); transform: translate(-2px, 2px); }
            60% { clip-path: inset(80% 0 5% 0); transform: translate(2px, -2px); }
            80% { clip-path: inset(10% 0 70% 0); transform: translate(-1px, 1px); }
            100% { clip-path: inset(30% 0 20% 0); transform: translate(1px, -1px); }
        }

        @keyframes glitch-anim-2 {
            0% { clip-path: inset(10% 0 60% 0); transform: translate(2px, -1px); }
            20% { clip-path: inset(80% 0 5% 0); transform: translate(-2px, 2px); }
            40% { clip-path: inset(30% 0 20% 0); transform: translate(2px, 1px); }
            60% { clip-path: inset(10% 0 80% 0); transform: translate(-1px, -2px); }
            80% { clip-path: inset(50% 0 30% 0); transform: translate(1px, 2px); }
            100% { clip-path: inset(20% 0 70% 0); transform: translate(-2px, 1px); }
        }

        /* Image corruption effect */
        #corrupt-canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
        }
    </style>
</head>
<body>
    <canvas id="corrupt-canvas"></canvas>

    <div id="glitch-container">
        <span id="base-text">SYSTEM FAILURE</span>
        <div class="glitch-layer" id="layer1">SYSTEM FAILURE</div>
        <div class="glitch-layer" id="layer2">SYSTEM FAILURE</div>
    </div>

    <script type="module" src="js/menu.js"></script>
    <script>
        const container = document.getElementById('glitch-container');
        const baseText = document.getElementById('base-text');
        const l1 = document.getElementById('layer1');
        const l2 = document.getElementById('layer2');

        const texts = ["ERROR", "NULL POINTER", "VOID", "404", "CORRUPTION", "WAKE UP", "DATA LOSS"];

        function triggerGlitch() {
            const t = texts[Math.floor(Math.random() * texts.length)];
            baseText.innerText = t;
            l1.innerText = t;
            l2.innerText = t;
            corruptScreen();
        }

        document.addEventListener('click', triggerGlitch);
        document.addEventListener('touchstart', triggerGlitch);

        // Canvas Corruption
        const canvas = document.getElementById('corrupt-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        function corruptScreen() {
            const w = canvas.width;
            const h = canvas.height;

            // Draw random noise rectangles
            for(let i=0; i<50; i++) {
                ctx.fillStyle = Math.random() > 0.5 ? '#fff' : '#000';
                if(Math.random() > 0.8) ctx.fillStyle = '#f0f';

                const x = Math.random() * w;
                const y = Math.random() * h;
                const rw = Math.random() * 200;
                const rh = Math.random() * 50;

                ctx.fillRect(x, y, rw, rh);
            }

            // Shift slices
            const sliceHeight = Math.random() * 50 + 10;
            const sliceY = Math.random() * (h - sliceHeight);
            const shift = (Math.random() - 0.5) * 100;

            const imageData = ctx.getImageData(0, sliceY, w, sliceHeight);
            ctx.putImageData(imageData, shift, sliceY);
        }

        // Auto corrupt
        setInterval(() => {
            if(Math.random() > 0.7) corruptScreen();

            // Fade out corruption
            ctx.fillStyle = 'rgba(0,0,0,0.1)';
            ctx.fillRect(0,0,canvas.width, canvas.height);
        }, 100);

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>
